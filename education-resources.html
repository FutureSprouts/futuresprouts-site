<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Educational Resources | FutureSprouts Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Request educational gardening resources including brochures, activity sheets, and instructional manuals." />
  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
</head>
<body>

  <!-- Injected header -->
  <div id="siteHeader"></div>

  <!-- Mobile menu (same as other pages) -->
  <div class="container mobile-menu">
    <a href="about.html">About</a>
    <a href="programs.html">Programs</a>
    <a href="services.html">Services</a>
    <a href="events.html">Events</a>
    <a href="impact.html">Impact</a>
    <a href="get-involved.html">Get Involved</a>
    <a href="contact.html">Contact</a>
    <a href="donate.html" class="donate-btn">Donate</a>

    <a href="cart.html" class="cart-link mobile-cart-link" aria-label="View cart">
      <span class="cart-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="18" height="18" role="img" focusable="false">
          <path d="M6.5 6.5h14l-1.2 7.2a2 2 0 0 1-2 1.7H9.1a2 2 0 0 1-2-1.6L5.2 3.8H2.8"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="9.5" cy="20" r="1.4" fill="currentColor"/>
          <circle cx="17.5" cy="20" r="1.4" fill="currentColor"/>
        </svg>
      </span>
      <span style="font-weight:800;">Cart</span>
      <span class="cart-badge" id="cartBadgeMobile">0</span>
    </a>
  </div>

  <!-- Main content -->
  <section class="section">
    <div class="container">
      <div class="kicker reveal">Services • Education</div>
      <h2 class="reveal">Request educational gardening resources.</h2>
      <p class="reveal">
        Choose brochures, activity sheets, and instructional manuals to support classroom
        learning and hands-on garden projects.
      </p>

      <div class="rulebox reveal">
        Most educational materials are printable or reproducible and may not reduce inventory.
      </div>

      <!-- Cards render here -->
      <div class="grid cols-3" id="educationGrid"></div>

      <div class="cart-actions reveal">
        <a class="btn outline" href="services.html">Back to Services</a>
        <a class="btn primary" href="cart.html">View Cart</a>
      </div>
    </div>
  </section>

  <!-- Injected footer -->
  <div id="siteFooter"></div>

  <script src="script.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {

      function readyCart() {
        return window.FS_CART
          && typeof window.FS_CART.loadCart === "function"
          && typeof window.FS_CART.cartAddOrUpdate === "function";
      }

      function getEducationItems() {
        const all = (window.FS_CONFIG && Array.isArray(window.FS_CONFIG.catalog))
          ? window.FS_CONFIG.catalog
          : [];
        return all.filter(it => it && it.kind === "edu");
      }

      function getQty(id) {
        const cart = window.FS_CART.loadCart();
        const item = cart.find(x => x.id === id);
        return item ? item.qty : 0;
      }

      function cardHTML(it) {
        // Use shared renderer if it exists
        if (window.FS_CART && typeof window.FS_CART.cardHTML === "function") {
          return window.FS_CART.cardHTML(it);
        }

        const qty = getQty(it.key);
        const name = String(it.name || "");
        const desc = String(it.desc || "");
        const img  = it.image || "images/placeholder.jpg";

        return `
          <div class="card reveal">
            <img class="shop-img" src="${img}" alt="${name}">
            <div class="shop-body">
              <div class="pill">Education</div>
              <h3>${name}</h3>
              <p class="small">${desc}</p>

              <div class="divider"></div>

              <div class="qty-row">
                <div>
                  <strong>Quantity</strong>
                  <div class="small">${it.inv && it.inv.note ? it.inv.note : ""}</div>
                </div>
                <div class="qty">
                  <button type="button" data-dec="${it.key}">−</button>
                  <span id="qty-${it.key}">${qty}</span>
                  <button type="button" data-inc="${it.key}">+</button>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      function render() {
        const grid = document.getElementById("educationGrid");
        if (!grid) return;

        const items = getEducationItems();

        const inv = (window.FS_CART && typeof window.FS_CART.loadInventory === "function")
          ? window.FS_CART.loadInventory()
          : null;
        const liveItems = (inv && inv.items) || {};

        const merged = items.map(it => {
          const live = liveItems[it.key];
          return live ? { ...it, inv: live } : it;
        });

        grid.innerHTML = merged.map(cardHTML).join("");
      }

      function bind() {
        document.addEventListener("click", (e) => {
          const inc = e.target && e.target.getAttribute && e.target.getAttribute("data-inc");
          const dec = e.target && e.target.getAttribute && e.target.getAttribute("data-dec");
          if (!inc && !dec) return;

          const key = inc || dec;
          const items = getEducationItems();
          const it = items.find(x => x.key === key);
          if (!it) return;

          const delta = inc ? +1 : -1;
          const cartName = `Education Resource — ${it.name}`;

          window.FS_CART.cartAddOrUpdate(it.key, cartName, { kind: "edu" }, delta);

          const qtyEl = document.getElementById(`qty-${it.key}`);
          if (qtyEl) qtyEl.textContent = getQty(it.key);
        });

        render();
      }

      if (readyCart()) bind();
      else {
        const t0 = Date.now();
        const timer = setInterval(() => {
          if (readyCart() || Date.now() - t0 > 1500) {
            clearInterval(timer);
            if (readyCart()) bind();
          }
        }, 50);
      }
    });
  </script>

</body>
</html>
